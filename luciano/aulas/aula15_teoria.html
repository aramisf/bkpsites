<PRE>

Aula 15

Comando awk

Linguagem para processamento de texto, principalmente em 
arquivos com colunas. Possui funções pre-definidas para operações
matemáticas e manipulação de strings.

Opções:

-F   --> separador de campos, default é espaços. -F":" define dois-pontos como
            separador de campos

/er/   --> para busca de expressão regular

'{print}'   -->  imprime resultado da busca, ou campos específicos

FS  --> variável separador de campos
NR --> variável para numerar linhas
NF -->  variável para número de campos na linha


Funções:

length(variavel)  --> retorno o tamanho da string. length($2)

sub(/er/,"string",variavel --> substitui a expressão regular pela string na
                                             variável. $0 é a variável default



Exemplos:

- filtra  as linhas com o padrão especificado. Linhas que terminam com conf
ls -l /etc | awk /conf$/

- usando outro separador de campos e imprimindo colunas
cat /etc/passwd | awk -F: '{print $1}'

- usando separador de campos
ls -l /etc |awk '{print $1 FS $8}'

- numerando linhas
ls -l /etc |awk '{print NR FS$1 FS $8}'

- filtra linhas com padrão especificado e mostra apenas as colunas 1 e 8.
ls -l /etc |awk '/conf$/{print $1" "$8}'

- imprime as linhas com mais de 3 campos. Elimina a primeira linha do ls -l (Total)
ls -l /etc | awk 'NF > 3'

- filtra linhas com arquivos cujos nomes possuem menos de 5 caracteres
ls -l /etc | awk 'length($8) < 5'

- imprime linhas pares
ls -l /etc | awk 'NR % 2 == 0 {print NR" "$0}'

- substitui strings
ls -l /etc | awk '{sub(/conf$/,"test"); print $0}'

- procura expressão em determinado campo
ls -l /etc | awk '$8 ~ /^[ae]/'

- inserindo strings entre campos
cat /etc/passwd | awk -F: '{print "Login: " $1}'



</PRE>
